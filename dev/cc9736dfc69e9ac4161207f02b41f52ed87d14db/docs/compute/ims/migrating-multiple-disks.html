<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(6)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(6) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(6) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(6) > ul.nav-list { display: block; } </style> <script src="/huaweicloud-knowledge-base/assets/js/vendor/lunr.min.js"></script> <script src="/huaweicloud-knowledge-base/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/huaweicloud-knowledge-base/assets/images/huawei-logo.png" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Migrating Multiple Disks | Huawei Cloud Knowledge Base</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Migrating Multiple Disks" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <meta property="og:description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <link rel="canonical" href="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" /> <meta property="og:url" content="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" /> <meta property="og:site_name" content="Huawei Cloud Knowledge Base" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Migrating Multiple Disks" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud.","headline":"Migrating Multiple Disks","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://res-static.hc-cdn.cn/cloudbu-site/intl/en-us/yunying/new-header/logo.png"}},"url":"https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/huaweicloud-knowledge-base/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Huawei Cloud Knowledge Base"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Compute category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/" class="nav-list-link">Compute</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Elastic Cloud Server (ECS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ecs" class="nav-list-link">Elastic Cloud Server (ECS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-gui-on-public-linux-images" class="nav-list-link">Installing GUI on Public Linux Images</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-sql-server-ubuntu" class="nav-list-link">Installing SQL Server on Ubuntu</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/remote-login-bricked-error" class="nav-list-link">Remote Login Bricked Error</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/slow-aws-cli-s3-upload-rate-on-windows" class="nav-list-link">Slow AWS CLI S3 Upload Rate on Windows ECSs</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in FunctionGraph category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph" class="nav-list-link">FunctionGraph</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/custom-container-image-function" class="nav-list-link">Custom Container Image Function</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/obs-triggered-functions" class="nav-list-link">OBS-triggered Functions</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/pipeline-integration" class="nav-list-link">Pipeline Integration</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Image Management Service (IMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ims" class="nav-list-link">Image Management Service (IMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-7-9-image" class="nav-list-link">Creating a Private OracleOS 7.9 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-9-4-image" class="nav-list-link">Creating a Private OracleOS 9.4 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" class="nav-list-link">Creating a Private Ubuntu Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-10-and-ubuntu-workspace-image" class="nav-list-link">Creating a Private Windows 10 and Ubuntu Workspace Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" class="nav-list-link">Creating a Private Windows Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" class="nav-list-link">Migrating Multiple Disks</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Containers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers" class="nav-list-link">Containers</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Container Engine (CCE) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers/cce" class="nav-list-link">Cloud Container Engine (CCE)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-azure-aks-to-huawei-cce" class="nav-list-link">Migrating Azure AKS to Huawei CCE</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-k8s-cluster-using-velero" class="nav-list-link">Migrating K8S Cluster Using Velero</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Databases category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases" class="nav-list-link">Databases</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Database and Application Migration (UGO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases/ugo" class="nav-list-link">Database and Application Migration (UGO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/databases/ugo/migrating-mysql-to-gaussdb" class="nav-list-link">Migrating MySQL to GaussDB</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack" class="nav-list-link">Huawei Cloud Stack</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack Online (HCSO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso" class="nav-list-link">Huawei Cloud Stack Online (HCSO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso/terraform-startup" class="nav-list-link">Terraform Startup</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Management & Governance category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance" class="nav-list-link">Management & Governance</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Eye Service (CES) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces" class="nav-list-link">Cloud Eye Service (CES)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/creating-and-managing-alarms" class="nav-list-link">Creating and Managing Alarms</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/monitoring-data-through-api-calling" class="nav-list-link">Monitoring Data Through API Calling</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/resources-monitoring" class="nav-list-link">Resources Monitoring</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Operations Center (COC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc" class="nav-list-link">Cloud Operations Center (COC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc/automate-resources-lifecycle" class="nav-list-link">Automate Resources Lifecycle</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in IAM Identity Center (IIC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic" class="nav-list-link">IAM Identity Center (IIC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Identity and Access Management (IAM) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam" class="nav-list-link">Identity and Access Management (IAM)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-openid" class="nav-list-link">User Federation with Keycloak (OpenID)</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration" class="nav-list-link">Migration</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration Center (MgC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/mgc" class="nav-list-link">Migration Center (MgC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/mgc/resources-discovery" class="nav-list-link">Resources Discovery</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Server Migration Service (SMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/sms" class="nav-list-link">Server Migration Service (SMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/bricked-ecs-after-migration-troubleshooting" class="nav-list-link">Bricked ECS After Migration Troubleshooting</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/failed-to-start-agent-error-quota-is-not-enough" class="nav-list-link">Failed to start agent，error：Current quota is not enough, please use MgC</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-servers-with-huge-disks" class="nav-list-link">Migrating Servers with Huge Disks</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-unsupported-os" class="nav-list-link">Migrating Unsupported OSs</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Networking category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking" class="nav-list-link">Networking</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Virtual Private Network (VPN) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking/vpn" class="nav-list-link">Virtual Private Network (VPN)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/networking/vpn/vpn-client-to-site-startup" class="nav-list-link">VPN Client to Site Startup</a></li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Huawei Cloud Knowledge Base" aria-label="Search Huawei Cloud Knowledge Base" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" class="site-button">en</a> </li> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/pt/docs/compute/ims/migrating-multiple-disks" class="site-button">pt</a> </li> </ul> </nav> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/Hatz-D/huaweicloud-knowledge-base" class="site-button" > Contribute </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/">Compute</a></li> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims">Image Management Service (IMS)</a></li> <li class="breadcrumb-nav-list-item"><span>Migrating Multiple Disks</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p><img width="450px" height="102px" src="https://console-static.huaweicloud.com/static/authui/20210202115135/public/custom/images/logo-en.svg" /></p> <h1 id="migrating-multiple-disks"> <a href="#migrating-multiple-disks" class="anchor-heading" aria-labelledby="migrating-multiple-disks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Migrating Multiple Disks </h1> <p>V2.0 – May 2024</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Version</strong></th> <th><strong>Author</strong></th> <th><strong>Description</strong></th> </tr> </thead> <tbody> <tr> <td>V1.0 – 2024-05-08</td> <td>Diogo Hatz 50037923</td> <td>Initial Version</td> </tr> <tr> <td>V1.0 – 2024-05-08</td> <td>Wisley da Silva 00830850</td> <td>Document Review</td> </tr> <tr> <td>V2.0 – 2024-05-16</td> <td>Diogo Hatz 50037923</td> <td>Document Update</td> </tr> </tbody> </table></div> <h1 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h1> <p>IMS is an image management service available on Huawei Cloud. In addition to providing a range of public images for free use, IMS also allows you to create private images from a variety of formats or use images available on the marketplace.</p> <p>This document aims to describe the methodology for creating private images from system disks and data disks.</p> <h1 id="qemu-img"> <a href="#qemu-img" class="anchor-heading" aria-labelledby="qemu-img"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> qemu-img </h1> <p>To perform VM migration using IMS, you need to install the qemu-img tool to generate system and disk images. Install the tool using the following command: “yum install qemu-img -y”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image3.png" alt="" /></p> <p>To check the paths of the disks to be migrated, type the command “fdisk -l” to list the disks present in the VM. <strong><span class="underline">Important:</span></strong> Take note of the path of the disk as a <strong>whole (vda),</strong> and not just a partition of the disk (vda1).</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image4.png" alt="" /></p> <p>To export disks to images, type the following command “sudo qemu-img convert -f raw -O qcow2 /dev/vda /mnt/vdb/test.qcow2”, where the ”-O” parameter corresponds to the format in which the image will be exported (possible formats: qcow2, vhd, vmdk, raw, etc.), “/dev/vda” corresponds to the disk that will be exported and “/mnt/vdb/test.qcow2” corresponds to the image that will be generated by the tool.</p> <p>Example:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>qemu-img convert <span class="nt">-f</span> raw <span class="nt">-O</span> qcow2 /dev/vda /mnt/vdb/test.qcow2
</code></pre></div></div> <p>After generating the image, it will be necessary to export this image to a bucket in OBS, the HWC object storage service. To do this, one of the options is to use the obsutil tool, which allows you to upload files from a Linux machine directly to an OBS bucket via the CLI. Obsutil documentation: <a href="https://support.huaweicloud.com/intl/en-us/utiltg-obs/obs_11_0003.html">https://support.huaweicloud.com/intl/en-us/utiltg-obs/obs_11_0003.html</a>.</p> <h1 id="ims"> <a href="#ims" class="anchor-heading" aria-labelledby="ims"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IMS </h1> <p>In order to import images to IMS, these images must be available in a bucket in the Huawei Cloud OBS Object Storage service. After uploading these images to the bucket, navigate to the IMS service section in the Huawei Cloud console and select “Create Image” in the “Private Images” section. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image5.png" alt="" /> <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image6.png" alt="" /> Select the “Import Image” option. For system disks, select the “System disk image” option and click the bucket where the image is located. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image7.png" alt="" /></p> <p>Select the system disk image from the objects contained in the bucket and select the “Enable automatic configuration” option.</p> <p>Also fill in the fields related to the source machine’s Boot mode, BIOS or UEFI, the machine’s operating system, the system disk size and the name of the image to be created. Click “Next” to proceed and confirm the image creation.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image8.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image9.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image10.png" alt="" /></p> <p>Wait until the image is finished being created.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image11.png" alt="" /></p> <p>To create data disks, repeat the same process above, selecting the “Data disk image” option in “Image Type” instead of “System disk image”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image12.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image13.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image14.png" alt="" /></p> <h1 id="ecs-creation"> <a href="#ecs-creation" class="anchor-heading" aria-labelledby="ecs-creation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ECS Creation </h1> <p>After the image creation is complete, navigate to the created system disk image and select “Apply for Server” to create a server from the generated image.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image15.png" alt="" /></p> <p>Select the created system disk image and complete the remaining ECS creation settings.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image16.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image17.png" alt="" /></p> <h1 id="evs-creation"> <a href="#evs-creation" class="anchor-heading" aria-labelledby="evs-creation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EVS Creation </h1> <p>After creating the server from its system disk, navigate to the created data disk image and select “Create Data Disk” to create a data disk from the generated image.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image18.png" alt="" /></p> <p>Configure the parameters of the disk to be created, as the disk name and size, and <strong>mark the same AZ as the previously created server</strong>. Otherwise, it will not be possible to mount the disk on the ECS.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image19.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image20.png" alt="" /></p> <h1 id="mount-the-evs-on-the-ecs"> <a href="#mount-the-evs-on-the-ecs" class="anchor-heading" aria-labelledby="mount-the-evs-on-the-ecs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Mount the EVS on the ECS </h1> <p>Finally, to mount the data disk on the server, navigate to the ECS section in the console and click on the created ECS. After that, click on the “Disks” section and select “Attach Disk”</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image21.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image22.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image23.png" alt="" /></p> <p>Select the created disk and click “OK” to associate the disk with the instance. With the disk associated with the instance, simply configure the disk’s mount through the instance’s terminal.</p> <h1 id="recover-file-system"> <a href="#recover-file-system" class="anchor-heading" aria-labelledby="recover-file-system"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recover File System </h1> <p>If the file system of the migrated machines is corrupted after migration, it will be necessary to restore it through an intermediate VM. To confirm that the filesystem of the system disk is damaged, first wait until the following message appears during boot. Waiting for the following error to appear before proceeding to the next steps is important for the process. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image24.png" alt="" /> After creating a new ECS in the HWC console, mount the disks whose filesystem needs to be restored to the intermediate ECS. First, remove the damaged disks from the original ECS and then place them in the intermediate ECS. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image25.png" alt="" /></p> <p>After removing the disks from the original ECS, mount them on the intermediate ECS</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image26.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image27.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image28.png" alt="" /></p> <p>Log in to the intermediate ECS and enter the command “fdisk -l” to list the disks mounted on the ECS. Copy the path of the device whose filesystem is corrupted, such as “/dev/vdc” or “/dev/vdb1”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image29.png" alt="" /></p> <p>To recover the corrupted filesystem, enter the command “fsck /dev/vdb”, where /dev/vdb will be replaced by the disk or partition that needs to be recovered. Press “a” to recover all corrupted inodes. It is worth noting that the disk does not need to be mounted in a directory for this process.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image30.png" alt="" /></p> <p>Wait until the recovery of all inodes is complete.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image31.png" alt="" /></p> <h1 id="modifying-fstab"> <a href="#modifying-fstab" class="anchor-heading" aria-labelledby="modifying-fstab"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Modifying fstab </h1> <p>If the ECS has problems during initialization, follow the following steps to edit the fstab disk table of the system. It is worth noting that for this step it will also be necessary to use an intermediate ECS if the filesystem of the original ECS is set to read-only due to a bad initialization. First, mount the system disk in a directory.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image32.png" alt="" /></p> <p>Edit the “/etc/fstab” file of the original ECS system disk.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image33.png" alt="" /></p> <p>Comment out all the old mounted disks in fstab.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image34.png" alt="" /></p> <p>After that, unmount the disk from the directory where it was mounted and remove the disks from the ECS to insert them into the original ECS again.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/migrating-multiple-disks/image35.png" alt="" /></p> <h1 id="references"> <a href="#references" class="anchor-heading" aria-labelledby="references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> References </h1> <ul> <li>SMS Documentation: <a href="https://support.huaweicloud.com/intl/en-us/bestpractice-sms/sms_05_0071.html">https://support.huaweicloud.com/intl/en-us/bestpractice-sms/sms_05_0071.html</a>.</li> <li>IMS documentation: <a href="https://support.huaweicloud.com/intl/en-us/usermanual-ims/ims_01_0215.html">https://support.huaweicloud.com/intl/en-us/usermanual-ims/ims_01_0215.html</a>.</li> <li>obsutil documentation: <a href="https://support.huaweicloud.com/intl/en-us/utiltg-obs/obs_11_0003.html">https://support.huaweicloud.com/intl/en-us/utiltg-obs/obs_11_0003.html</a>.</li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
