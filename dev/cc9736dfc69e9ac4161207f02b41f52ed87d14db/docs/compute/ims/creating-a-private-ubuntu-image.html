<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/huaweicloud-knowledge-base/assets/js/vendor/lunr.min.js"></script> <script src="/huaweicloud-knowledge-base/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/huaweicloud-knowledge-base/assets/images/huawei-logo.png" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Creating a Private Ubuntu Image | Huawei Cloud Knowledge Base</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Creating a Private Ubuntu Image" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <meta property="og:description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <link rel="canonical" href="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" /> <meta property="og:url" content="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" /> <meta property="og:site_name" content="Huawei Cloud Knowledge Base" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Creating a Private Ubuntu Image" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud.","headline":"Creating a Private Ubuntu Image","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://res-static.hc-cdn.cn/cloudbu-site/intl/en-us/yunying/new-header/logo.png"}},"url":"https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/huaweicloud-knowledge-base/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Huawei Cloud Knowledge Base"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Compute category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/" class="nav-list-link">Compute</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Elastic Cloud Server (ECS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ecs" class="nav-list-link">Elastic Cloud Server (ECS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-gui-on-public-linux-images" class="nav-list-link">Installing GUI on Public Linux Images</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-sql-server-ubuntu" class="nav-list-link">Installing SQL Server on Ubuntu</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/remote-login-bricked-error" class="nav-list-link">Remote Login Bricked Error</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/slow-aws-cli-s3-upload-rate-on-windows" class="nav-list-link">Slow AWS CLI S3 Upload Rate on Windows ECSs</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in FunctionGraph category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph" class="nav-list-link">FunctionGraph</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/custom-container-image-function" class="nav-list-link">Custom Container Image Function</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/obs-triggered-functions" class="nav-list-link">OBS-triggered Functions</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/pipeline-integration" class="nav-list-link">Pipeline Integration</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Image Management Service (IMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ims" class="nav-list-link">Image Management Service (IMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-7-9-image" class="nav-list-link">Creating a Private OracleOS 7.9 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-9-4-image" class="nav-list-link">Creating a Private OracleOS 9.4 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" class="nav-list-link">Creating a Private Ubuntu Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-10-and-ubuntu-workspace-image" class="nav-list-link">Creating a Private Windows 10 and Ubuntu Workspace Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" class="nav-list-link">Creating a Private Windows Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" class="nav-list-link">Migrating Multiple Disks</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Containers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers" class="nav-list-link">Containers</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Container Engine (CCE) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers/cce" class="nav-list-link">Cloud Container Engine (CCE)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-azure-aks-to-huawei-cce" class="nav-list-link">Migrating Azure AKS to Huawei CCE</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-k8s-cluster-using-velero" class="nav-list-link">Migrating K8S Cluster Using Velero</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Databases category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases" class="nav-list-link">Databases</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Database and Application Migration (UGO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases/ugo" class="nav-list-link">Database and Application Migration (UGO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/databases/ugo/migrating-mysql-to-gaussdb" class="nav-list-link">Migrating MySQL to GaussDB</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack" class="nav-list-link">Huawei Cloud Stack</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack Online (HCSO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso" class="nav-list-link">Huawei Cloud Stack Online (HCSO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso/terraform-startup" class="nav-list-link">Terraform Startup</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Management & Governance category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance" class="nav-list-link">Management & Governance</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Eye Service (CES) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces" class="nav-list-link">Cloud Eye Service (CES)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/creating-and-managing-alarms" class="nav-list-link">Creating and Managing Alarms</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/monitoring-data-through-api-calling" class="nav-list-link">Monitoring Data Through API Calling</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/resources-monitoring" class="nav-list-link">Resources Monitoring</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Operations Center (COC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc" class="nav-list-link">Cloud Operations Center (COC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc/automate-resources-lifecycle" class="nav-list-link">Automate Resources Lifecycle</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in IAM Identity Center (IIC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic" class="nav-list-link">IAM Identity Center (IIC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Identity and Access Management (IAM) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam" class="nav-list-link">Identity and Access Management (IAM)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-openid" class="nav-list-link">User Federation with Keycloak (OpenID)</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration" class="nav-list-link">Migration</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration Center (MgC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/mgc" class="nav-list-link">Migration Center (MgC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/mgc/resources-discovery" class="nav-list-link">Resources Discovery</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Server Migration Service (SMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/sms" class="nav-list-link">Server Migration Service (SMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/bricked-ecs-after-migration-troubleshooting" class="nav-list-link">Bricked ECS After Migration Troubleshooting</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/failed-to-start-agent-error-quota-is-not-enough" class="nav-list-link">Failed to start agent，error：Current quota is not enough, please use MgC</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-servers-with-huge-disks" class="nav-list-link">Migrating Servers with Huge Disks</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-unsupported-os" class="nav-list-link">Migrating Unsupported OSs</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Networking category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking" class="nav-list-link">Networking</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Virtual Private Network (VPN) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking/vpn" class="nav-list-link">Virtual Private Network (VPN)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/networking/vpn/vpn-client-to-site-startup" class="nav-list-link">VPN Client to Site Startup</a></li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Huawei Cloud Knowledge Base" aria-label="Search Huawei Cloud Knowledge Base" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" class="site-button">en</a> </li> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/pt/docs/compute/ims/creating-a-private-ubuntu-image" class="site-button">pt</a> </li> </ul> </nav> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/Hatz-D/huaweicloud-knowledge-base" class="site-button" > Contribute </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/">Compute</a></li> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims">Image Management Service (IMS)</a></li> <li class="breadcrumb-nav-list-item"><span>Creating a Private Ubuntu Image</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p><img width="450px" height="102px" src="https://console-static.huaweicloud.com/static/authui/20210202115135/public/custom/images/logo-en.svg" /></p> <h1 id="creating-a-private-ubuntu-image"> <a href="#creating-a-private-ubuntu-image" class="anchor-heading" aria-labelledby="creating-a-private-ubuntu-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Private Ubuntu Image </h1> <p>V1.0 – November 2023</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Version</strong></th> <th><strong>Author</strong></th> <th><strong>Description</strong></th> </tr> </thead> <tbody> <tr> <td>V1.0 – 2023-11-20</td> <td>Wisley da Silva Paulo 00830850</td> <td>Initial version</td> </tr> </tbody> </table></div> <h1 id="objective"> <a href="#objective" class="anchor-heading" aria-labelledby="objective"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Objective </h1> <p>This document aims to present the necessary procedures for creating an Ubuntu 20.04 image with UEFI using the IMS service.</p> <h1 id="creating-an-ubuntu-image"> <a href="#creating-an-ubuntu-image" class="anchor-heading" aria-labelledby="creating-an-ubuntu-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating an Ubuntu image </h1> <h2 id="download-the-ubuntu-server-iso-image-example---httpsreleasesubuntucomfocal-and-upload-it-to-obs"> <a href="#download-the-ubuntu-server-iso-image-example---httpsreleasesubuntucomfocal-and-upload-it-to-obs" class="anchor-heading" aria-labelledby="download-the-ubuntu-server-iso-image-example---httpsreleasesubuntucomfocal-and-upload-it-to-obs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download the Ubuntu Server ISO image (example - <a href="https://releases.ubuntu.com/focal/">https://releases.ubuntu.com/focal/</a>) and upload it to OBS. </h2> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image3.png" alt="" /></p> <h2 id="import-the-ubuntu-iso-image-into-the-ims-service"> <a href="#import-the-ubuntu-iso-image-into-the-ims-service" class="anchor-heading" aria-labelledby="import-the-ubuntu-iso-image-into-the-ims-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Import the Ubuntu ISO image into the IMS service. </h2> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image4.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image5.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image6.png" alt="" /></p> <p>Note: At the time of creating this document, when we select UEFI and Ubuntu, the options for versions 18.04 and 20.04 do not appear, but this was reported to the product team, who informed us and the change will be made in December 2023. At that time, you can select the 16.04 option and the system will work normally.</p> <h2 id="create-an-ecs-using-the-image-created-by-importing-the-iso-image"> <a href="#create-an-ecs-using-the-image-created-by-importing-the-iso-image" class="anchor-heading" aria-labelledby="create-an-ecs-using-the-image-created-by-importing-the-iso-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create an ECS using the image created by importing the ISO image. </h2> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image7.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image8.png" alt="" /></p> <h2 id="access-the-instance-and-open-the-shell-terminal"> <a href="#access-the-instance-and-open-the-shell-terminal" class="anchor-heading" aria-labelledby="access-the-instance-and-open-the-shell-terminal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Access the instance and open the shell terminal </h2> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image9.png" alt="" /></p> <h2 id="install-kvm"> <a href="#install-kvm" class="anchor-heading" aria-labelledby="install-kvm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install KVM </h2> <p>Add the virtio drivers to the file: “/etc/initramfs-tools/modules”:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano /etc/initramfs-tools/modules

virtio_blk
virtio_scsi
virtio_net
virtio_pci
virtio_ring
virtio
</code></pre></div></div> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image10.png" alt="" /></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update-initramfs <span class="nt">-u</span>
</code></pre></div></div> <h2 id="install-and-start-openssh"> <a href="#install-and-start-openssh" class="anchor-heading" aria-labelledby="install-and-start-openssh"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install and start openssh </h2> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt update
apt <span class="nb">install </span>openssh-server <span class="nt">-y</span>
service sshd start
</code></pre></div></div> <h2 id="configure-sshdconf"> <a href="#configure-sshdconf" class="anchor-heading" aria-labelledby="configure-sshdconf"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configure sshd.conf </h2> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano /etc/ssh/sshd_config
</code></pre></div></div> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image11.png" alt="" /></p> <h2 id="install-and-configure-cloud-init"> <a href="#install-and-configure-cloud-init" class="anchor-heading" aria-labelledby="install-and-configure-cloud-init"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install and configure cloud-init </h2> <p>(apt install cloud-init is not working for version 20.04, install version 23 and it has compatibility issues)</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt remove cloud-init
apt purge cloud-init
<span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/cloud/<span class="k">*</span>
<span class="nb">rm</span> <span class="nt">-rf</span> /var/log/cloud-init<span class="k">*</span>
<span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/cloud
<span class="nb">rm</span> <span class="nt">-rf</span> /etc/cloud
<span class="nb">rm</span> <span class="nt">-rf</span> /usr/local/bin/cloud<span class="k">*</span>
apt update
apt <span class="nb">install </span>cloud-guest-utils <span class="nt">-y</span>
apt <span class="nb">install </span>python3-pip <span class="nt">-y</span>
apt <span class="nb">install </span>python3-devel
wget https://launchpad.net/cloud-init/trunk/19.1/+download/cloud-init-19.1.tar.gz
<span class="nb">tar</span> <span class="nt">-zxvf</span> cloud-init-19.1.tar.gz
<span class="nb">cd </span>cloud-init-19.1
pip3 <span class="nb">install</span> <span class="nt">-r</span> ./requirements.txt
python3 setup.py <span class="nb">install
</span>cloud-init <span class="nt">-v</span>
cloud-init init <span class="nt">--local</span>

nano /etc/cloud/cloud.cfg
</code></pre></div></div> <p>Change the parameters as shown in the images, add the lines at the end of the file:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- name: root
   lock_passwd: False

ssh_pwauth: <span class="nb">true</span>
</code></pre></div></div> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image12.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image13.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image14.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image15.png" alt="" /></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>datasource_list: <span class="o">[</span> OpenStack <span class="o">]</span>
datasource:
  OpenStack:
    metadata_urls: <span class="o">[</span><span class="s1">'http://169.254.169.254'</span><span class="o">]</span>
    max_wait: 120
    <span class="nb">timeout</span>: 5
    apply_network_config: <span class="nb">false
</span>network:
  config: disabled
</code></pre></div></div> <h2 id="check-cloud-init-if-any-error-occurs-try-restarting-the-instance-and-run-the-command-again"> <a href="#check-cloud-init-if-any-error-occurs-try-restarting-the-instance-and-run-the-command-again" class="anchor-heading" aria-labelledby="check-cloud-init-if-any-error-occurs-try-restarting-the-instance-and-run-the-command-again"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Check cloud-init, if any error occurs try restarting the instance and run the command again: </h2> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>cloud-init init <span class="nt">--local</span>
</code></pre></div></div> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image16.png" alt="" /></p> <h2 id="stop-the-instance-and-create-the-image"> <a href="#stop-the-instance-and-create-the-image" class="anchor-heading" aria-labelledby="stop-the-instance-and-create-the-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Stop the instance and create the image: </h2> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image17.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image18.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image19.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-ubuntu-image/image20.png" alt="" /></p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
