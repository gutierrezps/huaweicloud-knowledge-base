<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(5)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(5) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(5) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(5) > ul.nav-list { display: block; } </style> <script src="/huaweicloud-knowledge-base/assets/js/vendor/lunr.min.js"></script> <script src="/huaweicloud-knowledge-base/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/huaweicloud-knowledge-base/assets/images/huawei-logo.png" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Creating a Private Windows Image | Huawei Cloud Knowledge Base</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Creating a Private Windows Image" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <meta property="og:description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <link rel="canonical" href="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" /> <meta property="og:url" content="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" /> <meta property="og:site_name" content="Huawei Cloud Knowledge Base" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Creating a Private Windows Image" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud.","headline":"Creating a Private Windows Image","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://res-static.hc-cdn.cn/cloudbu-site/intl/en-us/yunying/new-header/logo.png"}},"url":"https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/huaweicloud-knowledge-base/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Huawei Cloud Knowledge Base"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Compute category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/" class="nav-list-link">Compute</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Elastic Cloud Server (ECS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ecs" class="nav-list-link">Elastic Cloud Server (ECS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-gui-on-public-linux-images" class="nav-list-link">Installing GUI on Public Linux Images</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-sql-server-ubuntu" class="nav-list-link">Installing SQL Server on Ubuntu</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/remote-login-bricked-error" class="nav-list-link">Remote Login Bricked Error</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/slow-aws-cli-s3-upload-rate-on-windows" class="nav-list-link">Slow AWS CLI S3 Upload Rate on Windows ECSs</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in FunctionGraph category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph" class="nav-list-link">FunctionGraph</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/custom-container-image-function" class="nav-list-link">Custom Container Image Function</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/obs-triggered-functions" class="nav-list-link">OBS-triggered Functions</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/pipeline-integration" class="nav-list-link">Pipeline Integration</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Image Management Service (IMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ims" class="nav-list-link">Image Management Service (IMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-7-9-image" class="nav-list-link">Creating a Private OracleOS 7.9 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-9-4-image" class="nav-list-link">Creating a Private OracleOS 9.4 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" class="nav-list-link">Creating a Private Ubuntu Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-10-and-ubuntu-workspace-image" class="nav-list-link">Creating a Private Windows 10 and Ubuntu Workspace Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" class="nav-list-link">Creating a Private Windows Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" class="nav-list-link">Migrating Multiple Disks</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Containers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers" class="nav-list-link">Containers</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Container Engine (CCE) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers/cce" class="nav-list-link">Cloud Container Engine (CCE)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-azure-aks-to-huawei-cce" class="nav-list-link">Migrating Azure AKS to Huawei CCE</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-k8s-cluster-using-velero" class="nav-list-link">Migrating K8S Cluster Using Velero</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Databases category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases" class="nav-list-link">Databases</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Database and Application Migration (UGO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases/ugo" class="nav-list-link">Database and Application Migration (UGO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/databases/ugo/migrating-mysql-to-gaussdb" class="nav-list-link">Migrating MySQL to GaussDB</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack" class="nav-list-link">Huawei Cloud Stack</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack Online (HCSO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso" class="nav-list-link">Huawei Cloud Stack Online (HCSO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso/terraform-startup" class="nav-list-link">Terraform Startup</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Management & Governance category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance" class="nav-list-link">Management & Governance</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Eye Service (CES) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces" class="nav-list-link">Cloud Eye Service (CES)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/creating-and-managing-alarms" class="nav-list-link">Creating and Managing Alarms</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/monitoring-data-through-api-calling" class="nav-list-link">Monitoring Data Through API Calling</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/resources-monitoring" class="nav-list-link">Resources Monitoring</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Operations Center (COC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc" class="nav-list-link">Cloud Operations Center (COC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc/automate-resources-lifecycle" class="nav-list-link">Automate Resources Lifecycle</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in IAM Identity Center (IIC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic" class="nav-list-link">IAM Identity Center (IIC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Identity and Access Management (IAM) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam" class="nav-list-link">Identity and Access Management (IAM)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-openid" class="nav-list-link">User Federation with Keycloak (OpenID)</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration" class="nav-list-link">Migration</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration Center (MgC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/mgc" class="nav-list-link">Migration Center (MgC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/mgc/resources-discovery" class="nav-list-link">Resources Discovery</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Server Migration Service (SMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/sms" class="nav-list-link">Server Migration Service (SMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/bricked-ecs-after-migration-troubleshooting" class="nav-list-link">Bricked ECS After Migration Troubleshooting</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/failed-to-start-agent-error-quota-is-not-enough" class="nav-list-link">Failed to start agent，error：Current quota is not enough, please use MgC</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-servers-with-huge-disks" class="nav-list-link">Migrating Servers with Huge Disks</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-unsupported-os" class="nav-list-link">Migrating Unsupported OSs</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Networking category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking" class="nav-list-link">Networking</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Virtual Private Network (VPN) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking/vpn" class="nav-list-link">Virtual Private Network (VPN)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/networking/vpn/vpn-client-to-site-startup" class="nav-list-link">VPN Client to Site Startup</a></li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Huawei Cloud Knowledge Base" aria-label="Search Huawei Cloud Knowledge Base" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" class="site-button">en</a> </li> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/pt/docs/compute/ims/creating-a-private-windows-image" class="site-button">pt</a> </li> </ul> </nav> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/Hatz-D/huaweicloud-knowledge-base" class="site-button" > Contribute </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/">Compute</a></li> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims">Image Management Service (IMS)</a></li> <li class="breadcrumb-nav-list-item"><span>Creating a Private Windows Image</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p><img width="450px" height="102px" src="https://console-static.huaweicloud.com/static/authui/20210202115135/public/custom/images/logo-en.svg" /></p> <h1 id="creating-a-private-windows-image"> <a href="#creating-a-private-windows-image" class="anchor-heading" aria-labelledby="creating-a-private-windows-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Private Windows Image </h1> <p>V1.0 – January 2024</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Version</strong></th> <th><strong>Author</strong></th> <th><strong>Description</strong></th> </tr> </thead> <tbody> <tr> <td>V1.0 – 2024-01-02</td> <td>Diogo Hatz 50037923</td> <td>Initial Version</td> </tr> <tr> <td>V1.0 – 2024-01-02</td> <td>Wisley Paulo 00830850</td> <td>Document Review</td> </tr> </tbody> </table></div> <h1 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h1> <p>Image Management Service (IMS) is a service provided on Huawei Cloud that allows image management. Images are nothing more than cloud servers or disk templates that contain an operating system (OS), service data, or software.</p> <p>This document aims to provide a step-by-step guide on how to create customized images on IMS on Huawei Cloud from ISO files external to Huawei Cloud.</p> <h1 id="iso-preparation"> <a href="#iso-preparation" class="anchor-heading" aria-labelledby="iso-preparation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ISO preparation </h1> <p>In order to provide the instances generated from the ISO file with access to the Internet and other VM functionalities, it is necessary to install VMTools drivers on these instances. To do this, the VMTools driver will be integrated into the desired ISO file using the AnyBurn software, which can be downloaded via the following hyperlink: <a href="http://www.anyburn.com/index.htm">http://www.anyburn.com/index.htm</a>.</p> <p>In addition, the VMTools driver package can be downloaded from the following link: <a href="https://ecs-instance-driver.obs.cn-north-1.myhuaweicloud.com/vmtools-windows.zip">https://ecs-instance-driver.obs.cn-north-1.myhuaweicloud.com/vmtools-windows.zip</a>. After installing AnyBurn and extracting the VMTools driver package files from the “vmtools-windows.zip” file, open the installed AnyBurn software and click “Browse/Extract image file”. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image3.png" alt="" /> Select the “vmtools-windows” folder directory and select the “vmtools-windows.iso” file. Click “Next” twice. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image4.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image5.png" alt="" /></p> <p>Select the directory where the ISO files will be extracted. As a suggestion, select the previously extracted “vmtools-windows” folder and click “Next”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image6.png" alt="" /></p> <p>Return to the AnyBurn software home menu and select the “Edit image file” option.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image7.png" alt="" /></p> <p>Select the directory of the ISO image to be created and click “Next”.</p> <p>In this case, the selected file will be the Windows Server 2019 ISO.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image8.png" alt="" /></p> <p>Select the “More” option and click “New Folder”. Name the folder as “vmtools-windows”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image9.png" alt="" /></p> <p>Click on the created folder and click “Add+”. Select the four files extracted from the “vmtools-windows.iso” ISO and click “Next” and then “Create now”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image10.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image11.png" alt="" /></p> <p>Wait until the progress bar reaches the end.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image12.png" alt="" /></p> <h1 id="upload-the-iso"> <a href="#upload-the-iso" class="anchor-heading" aria-labelledby="upload-the-iso"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Upload the ISO </h1> <p>To upload the ISO of the instance to be created, the OBS storage service will be used. Access the Huawei Cloud console and go to the OBS section. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image13.png" alt="" /> If the OBS Browser + application is not installed on your computer, please read section 3.1. Otherwise, skip to section 3.2.</p> <h2 id="obs-browser-"> <a href="#obs-browser-" class="anchor-heading" aria-labelledby="obs-browser-"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OBS Browser + </h2> <p>Within OBS, click “Download” on the icon representing OBS Browser +. Download and install the OBS Browser + software.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image14.png" alt="" /></p> <p>Return to the Huawei Cloud console, hover over your Huawei Cloud ID, and click “My Credentials”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image15.png" alt="" /></p> <p>Click on “Access Keys”, “Create Access Keys”, “Ok” and “Download”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image16.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image17.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image18.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image19.png" alt="" /></p> <h2 id="upload-iso-to-bucket"> <a href="#upload-iso-to-bucket" class="anchor-heading" aria-labelledby="upload-iso-to-bucket"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Upload ISO to bucket </h2> <p>In the OBS section within the Huawei Cloud console, click “Create Bucket”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image20.png" alt="" /></p> <p>Give the bucket a name and select “Standard” in “Default Storage Class”. This setting is important, since if another class option is selected, an error will occur when creating the image from the ISO later.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image21.png" alt="" /></p> <p>Click “Create Now” to create the bucket. Open the OBS Browser + application and enter the access information as requested in the “AK Login” section. In the “Access Key ID” and “Secret Access Key” fields, enter the generated data in section 3.1. In “Service”, select “HUAWEI CLOUD OBS (default)”. In “Access Path” enter “obs://” followed by the name of the bucket created. In this example, the path will be “obs://ims-iso-tutorial”. Click on “Log In”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image22.png" alt="" /></p> <p>Click Upload</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image23.png" alt="" /></p> <p>Select the “Standard” option in “Storage Class” and in “Add File” to add the iso of the instance to be created. In this case, the Windows Server 2019 ISO. Wait until the upload is complete before proceeding to the next steps. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image24.png" alt="" /></p> <h1 id="creating-the-image-in-ims"> <a href="#creating-the-image-in-ims" class="anchor-heading" aria-labelledby="creating-the-image-in-ims"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating the image in IMS </h1> <p>Access the Huawei Cloud console and go to the IMS section.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image25.png" alt="" /></p> <p>Go to the “Private Images” section and click “Create Now”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image26.png" alt="" /></p> <p>Configure the parameters according to the instance image that will be created. In this case, the Windows Server 2019 Standard OS.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image27.png" alt="" /></p> <p>For Windows images, select the “Bring your own license (BYOL)” option.</p> <p>Click “Next” after configuring all fields.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image28.png" alt="" /></p> <p>Check if the information is correct and click “Submit”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image29.png" alt="" /></p> <p>Wait until the ISO image is created and click “Create ECS” to create an instance of the generated image.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image30.png" alt="" /></p> <p>Configure the information required to create the ECS and click “OK” to create the ECS.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image31.png" alt="" /></p> <p>The next steps will be important to configure the image with the software and settings required for the proper functioning of the instances created from this image.</p> <h1 id="os-installation"> <a href="#os-installation" class="anchor-heading" aria-labelledby="os-installation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OS Installation </h1> <p>Access the Huawei Cloud console and go to the ECS service section. Click “Remote Login” to remotely access the instance created in step 4 of this document.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image32.png" alt="" /></p> <p>Set the system language and click “Next” and “Install now”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image33.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image34.png" alt="" /></p> <p>Select the OS version to be installed, check that the option contains “Desktop Experience” so that a graphical interface is installed with the system, if desired, and click “Next”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image35.png" alt="" /></p> <p>Accept the terms and click “Next”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image36.png" alt="" /></p> <p>Select the “Custom: Install Windows only (advanced)” option.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image37.png" alt="" /></p> <p>Click “Load driver” and then “Browse”. Select the following path: “C:\vmtools-windows/upgrade/<strong>your-OS-version</strong>/drivers/viostor”.</p> <p><strong>Note: For Windows Server 2019 and 2022, select the driver for Windows Server 2016.</strong></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image38.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image39.png" alt="" /></p> <p>Click “Next” twice in a row and wait for Windows to install.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image40.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image41.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image42.png" alt="" /></p> <p>Set a password for the Windows Administrator profile and click “Finish” to complete the Windows installation.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image43.png" alt="" /></p> <p>Go to the Windows desktop, open File Explorer, and navigate to the ejectable drive. Open the “vmtools-windows” folder and install the “setup” software, which corresponds to the VMTools drivers.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image44.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image45.png" alt="" /></p> <p>Restart the computer when prompted.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image46.png" alt="" /></p> <h1 id="ecs-configuration"> <a href="#ecs-configuration" class="anchor-heading" aria-labelledby="ecs-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ECS Configuration </h1> <h2 id="eip"> <a href="#eip" class="anchor-heading" aria-labelledby="eip"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EIP </h2> <p>To provide Internet access to the ECS, it is necessary to attach an EIP to the ECS. To do this, click “More” next to the desired ECS in the ECS section of the Huawei Cloud Console, “Manage Network” and “Bind EIP”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image47.png" alt="" /></p> <p>If no EIP is available, purchase an EIP by clicking “Buy EIP”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image48.png" alt="" /></p> <p>Click “Buy EIP again”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image49.png" alt="" /></p> <p>Select the parameters of the EIP that will be attached to the ECS, such as its bandwidth, and click “Next” and “Submit”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image50.png" alt="" /></p> <p>Select the purchased EIP to be attached to the ECS.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image51.png" alt="" /></p> <p>If you want to install system updates, proceed to section 6.2. Otherwise, skip to section 6.3. <strong>Warning: It is important that system updates are performed before any other system configuration if chosen.</strong></p> <h2 id="system-update"> <a href="#system-update" class="anchor-heading" aria-labelledby="system-update"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> System update </h2> <p>To update the system, click on Windows Search, type “update” and click on “Check for updates”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image52.png" alt="" /></p> <p>Click on “Check for updates” again and wait until all updates are performed. ECS may be restarted a few times in this process.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image53.png" alt="" /></p> <h2 id="gpeditmsc"> <a href="#gpeditmsc" class="anchor-heading" aria-labelledby="gpeditmsc"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Gpedit.msc </h2> <p>Click on Windows Search and type “gpedit.msc” to open the local group policy editor.</p> <h3 id="server-manager"> <a href="#server-manager" class="anchor-heading" aria-labelledby="server-manager"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Server Manager </h3> <p>Navigate to “Computer Configuration &gt; Administrative Templates &gt; System &gt; Server Manager”. Double-click on “Do not display Server Manager automatically at logon” and select “Enabled” to prevent Server Manager from opening automatically when starting the instance.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image54.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image55.png" alt="" /></p> <h3 id="shut-down"> <a href="#shut-down" class="anchor-heading" aria-labelledby="shut-down"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Shut down </h3> <p>Navigate to “Computer Configuration &gt; Windows Settings &gt; Security Settings &gt; User Rights Assignment“ and double-click on the “Shut down the system” option.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image56.png" alt="" /></p> <p>Click “Add User or Group”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image57.png" alt="" /></p> <p>Click “Object Types”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image58.png" alt="" /></p> <p>Enable the “Groups” option and click “OK”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image59.png" alt="" /></p> <p>In “Enter the object names to select”, type “Users” and press the Enter key. Click “OK”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image60.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image61.png" alt="" /></p> <h3 id="firewall"> <a href="#firewall" class="anchor-heading" aria-labelledby="firewall"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Firewall </h3> <p>Navigate to “Computer Configuration &gt; Network &gt; Network Connections &gt; Domain Profile”, double-click “Windows Firewall: Protect all network connections” and select the “Disabled” option.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image62.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image63.png" alt="" /></p> <p>Navigate to “Computer Configuration &gt; Network &gt; Network Connections &gt; Standard Profile”, double-click “Windows Firewall: Protect all network connections” and select the “Disabled” option.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image64.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image65.png" alt="" /></p> <h2 id="services"> <a href="#services" class="anchor-heading" aria-labelledby="services"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Services </h2> <p><strong>Note: For Windows Server 2019, skip section 6.4.</strong></p> <p>Click on Windows Search and type “services” to open the Windows services management window.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image66.png" alt="" /></p> <p>Navigate to “Windows Firewall” and double-click it. In “Startup type” select “Disabled”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image67.png" alt="" /></p> <h2 id="dhcp"> <a href="#dhcp" class="anchor-heading" aria-labelledby="dhcp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DHCP </h2> <p>Check if the instance’s NICs are configured as DHCP. To do this, navigate to the “Control Panel” through Windows Search, go to “Network and Internet Connections”, click on ”Network and Sharing Center”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image68.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image69.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image70.png" alt="" /></p> <p>Click on the network adapter available in your instance and click on “Properties”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image71.png" alt="" /></p> <p>Select the network protocol used by the instance, in this case IPv4, and click “Properties”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image72.png" alt="" /></p> <p>Check whether the enabled option for both options is related to obtain the IP address and DNS automatically. Click “Ok” to save.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image73.png" alt="" /></p> <h2 id="remote-desktop"> <a href="#remote-desktop" class="anchor-heading" aria-labelledby="remote-desktop"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Remote Desktop </h2> <p>To enable remote access to the instance, open Windows Search and type “Allow remote access to your computer”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image74.png" alt="" /></p> <p>Enable the “Allow remote connections to this computer” option and click “OK” to confirm the change.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image75.png" alt="" /></p> <p>Check if the Windows firewall allows incoming and outgoing traffic for the remote access service by navigating to Windows Firewall</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image76.png" alt="" /></p> <p>Click “Allow an app or feature through Windows Defender Firewall”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image77.png" alt="" /></p> <p>Enable remote access through the firewall by enabling the “Remote Desktop” service options.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image78.png" alt="" /></p> <h2 id="pv-driver"> <a href="#pv-driver" class="anchor-heading" aria-labelledby="pv-driver"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> PV Driver </h2> <p>The PV Driver is responsible for managing instances with Xen virtualization. Although this type of virtualization technology has been discontinued in Huawei Cloud, it is still important that the drivers are installed. Download them through the following link in the instance: <a href="https://support.huaweicloud.com/intl/en-us/usermanual-ims/ims_01_0317.html">https://support.huaweicloud.com/intl/en-us/usermanual-ims/ims_01_0317.html</a>. Extract the downloaded file and launch the “pvdriver-win” installer. Accept the terms of service and click “Install”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image79.png" alt="" /></p> <p>Click “Finish” after the installation is complete.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image80.png" alt="" /></p> <h2 id="one-click-reset-password-plugin"> <a href="#one-click-reset-password-plugin" class="anchor-heading" aria-labelledby="one-click-reset-password-plugin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> One-click reset password plugin </h2> <p>This plugin allows the instance password to be reset via the Huawei Cloud console. To install it, download it from the following link on the instance: <a href="https://cn-north-1-cloud-reset-pwd.obs.cn-north-1.myhuaweicloud.com/windows/reset_pwd_agent/CloudResetPwdAgent.zip">https://cn-north-1-cloud-reset-pwd.obs.cn-north-1.myhuaweicloud.com/windows/reset_pwd_agent/CloudResetPwdAgent.zip</a>. Extract the downloaded “CloudResetPwdAgent.zip” file. Before installing it, however, port 80 needs to be enabled in the ECS security group for the installation to be successful. Navigate to the Huawei Cloud console and go to the ECS section. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image81.png" alt="" /> Under “Network and Security”, click “Security Groups”. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image82.png" alt="" /></p> <p>Select the security group to which the ECS instance is attached.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image83.png" alt="" /></p> <p>In “Outbound Rules”, add the rule to allow access to the TCP protocol to port 80 from the following destination: “169.254.0.0/16”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image84.png" alt="" /></p> <p>Return to ECS and run the “Setup” file present in the previously extracted folder.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image85.png" alt="" /></p> <p>To verify the successful installation of the plugin, open the task manager in the services section and check if the “cloudResetPwdAgent” service is present.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image86.png" alt="" /></p> <h2 id="cloudbase-init"> <a href="#cloudbase-init" class="anchor-heading" aria-labelledby="cloudbase-init"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cloudbase-Init </h2> <p>Cloudbase-init is an important software that manages virtual machines. To download it, access the following link through the ECS browser: <a href="https://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi">https://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi</a>.</p> <p>After downloading it, open the “CloudbaseInitSetup” installer and click “Next” three times in a row until the user settings screen appears. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image87.png" alt="" /> Set the “Username” to “Administrator” and select “COM1” in the “Serial port for logging” option. Click “Next” to continue and “Install” to install the software. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image88.png" alt="" /></p> <p>Finally, disable the two available options and click “Finish”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image89.png" alt="" /></p> <p>Finally, cloudbase-init needs to be configured. Navigate to the following path: “C:\Program Files\Cloudbase Solutions\Cloudbase-Init\conf” and open the “cloudbase-init.conf” file using notepad.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image90.png" alt="" /></p> <p>Add the following settings to the end of the file:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">netbios_host_name_compatibility</span><span class="o">=</span><span class="nb">false 
</span><span class="nv">metadata_services</span><span class="o">=</span>cloudbaseinit.metadata.services.httpservice.HttpService
<span class="nv">plugins</span><span class="o">=</span>cloudbaseinit.plugins.common.localscripts.LocalScriptsPlugin,cloudbaseinit.plugins.common.mtu.MTUPlugin,cloudbaseinit.plugins.windows.createuser.CreateUserPlugin,cloudbaseinit.plugins.common.setuserpassword.SetUserPasswordPlugin,cloudbaseinit.plugins.common.sshpublickeys.SetUserSSHPublicKeysPlugin,cloudbaseinit.plugins.common.sethostname.SetHostNamePlugin,cloudbaseinit.plugins.windows.extendvolumes.ExtendVolumesPlugin,cloudbaseinit.plugins.common.userdata.UserDataPlugin,cloudbaseinit.plugins.windows.licensing.WindowsLicensingPlugin
<span class="nv">first_logon_behaviour</span><span class="o">=</span>no
</code></pre></div></div> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image91.png" alt="" /></p> <p>Optionally, also add the following settings:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">plugins</span><span class="o">=</span>cloudbaseinit.plugins.windows.winrmlistener.ConfigWinRMListenerPlugin,cloudbaseinit.plugins.windows.winrmcertificateauth.ConfigWinRMCertificateAuthPlugin
<span class="nv">retry_count</span><span class="o">=</span>40
<span class="nv">retry_count_interval</span><span class="o">=</span>5
<span class="nv">real_time_clock_utc</span><span class="o">=</span><span class="nb">true</span>
<span class="o">[</span>openstack]
<span class="nv">add_metadata_private_ip_route</span><span class="o">=</span>False
</code></pre></div></div> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image92.png" alt="" /></p> <p>For a better understanding of how each of the configurations performed here works, please refer to the official IMS documentation at the following link: <a href="https://support.huaweicloud.com/intl/en-us/usermanual-ims/en-us_topic_0030730602.html">https://support.huaweicloud.com/intl/en-us/usermanual-ims/en-us_topic_0030730602.html</a>.</p> <p>Open Windows cmd to clear the currently configured DHCP address. This step will limit the instance’s internet access until it is restarted. Open Windows Search and type “cmd”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image93.png" alt="" /></p> <p>Type the following command: “ipconfig /release”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image94.png" alt="" /></p> <p>Also, type the following sequence of commands: “diskpart” and “san policy=onlineall”. Check if the configuration was applied by typing the “san” command.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image95.png" alt="" /></p> <p>Type “exit” twice consecutively to exit the cmd. Restart the instance so that the instance can resume internet access. Please note that when you log in to the Administrator account, ECS will automatically restart. After the second restart, you will notice that the password you previously set no longer works for the administrator profile. This is due to the installation of cloudbase-init, which will randomize the profile password after the first system restart after its installation. To set the password again, go to the Huawei Cloud console in the ECS section, click “More” and “Reset password” next to the desired instance. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image96.png" alt="" /> Set the password again, enable the “Auto Restart” box and click “OK”. <img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image97.png" alt="" /></p> <p>After the instance automatically restarts, you will notice how the Administrator profile password has been changed to the password defined in the console.</p> <p>Now, perform the other desired configurations in ECS to generate the final instance image.</p> <h1 id="creating-the-image"> <a href="#creating-the-image" class="anchor-heading" aria-labelledby="creating-the-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating the image </h1> <p>After performing all the above adjustments and those chosen by you, navigate to the ECS section in the Huawei Cloud console, click “More” next to the desired instance, and click “Stop” to shut down the instance.</p> <p>Select “Yes”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image98.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image99.png" alt="" /></p> <p>Navigate to the IMS section in the Huawei Cloud Console</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image100.png" alt="" /></p> <p>Click “Create Now” under “Image creation”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image101.png" alt="" /></p> <p>Select “Create Image” in “Type” and “System disk image” in “Image Type”. Select the desired ECS, give the image a name and click “Next”, after checking the box to accept the terms. Click “Submit”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/compute/ims/private-windows-image-from-iso-files/image102.png" alt="" /></p> <p>After the image creation is complete, new instances can now be created from the ISO file downloaded in step 2!</p> <h1 id="references"> <a href="#references" class="anchor-heading" aria-labelledby="references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> References: </h1> <ul> <li>IMS documentation: <a href="https://support.huaweicloud.com/intl/en-us/usermanual-ims/ims_01_0220.html">https://support.huaweicloud.com/intl/en-us/usermanual-ims/ims_01_0220.html</a>.</li> <li>Workspace documentation: <a href="https://support.huaweicloud.com/intl/en-us/usermanual-workspace/workspace_06_0510.html">https://support.huaweicloud.com/intl/en-us/usermanual-workspace/workspace_06_0510.html</a>.</li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
