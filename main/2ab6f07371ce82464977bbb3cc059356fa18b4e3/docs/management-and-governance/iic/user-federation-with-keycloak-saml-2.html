<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/huaweicloud-knowledge-base/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(6) > ul > li:nth-child(3) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(6) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(6) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(6) > ul > li:nth-child(3) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(6) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(6) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(6) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/huaweicloud-knowledge-base/assets/js/vendor/lunr.min.js"></script> <script src="/huaweicloud-knowledge-base/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/huaweicloud-knowledge-base/assets/images/huawei-logo.png" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>User Federation with Keycloak (SAML 2.0) | Huawei Cloud Knowledge Base</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="User Federation with Keycloak (SAML 2.0)" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <meta property="og:description" content="This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud." /> <link rel="canonical" href="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" /> <meta property="og:url" content="https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" /> <meta property="og:site_name" content="Huawei Cloud Knowledge Base" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="User Federation with Keycloak (SAML 2.0)" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"This blog is a knowledge base created in order to enable faster documentation sharing related to Huawei Cloud.","headline":"User Federation with Keycloak (SAML 2.0)","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://res-static.hc-cdn.cn/cloudbu-site/intl/en-us/yunying/new-header/logo.png"}},"url":"https://hatz-d.github.io/huaweicloud-knowledge-base/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/huaweicloud-knowledge-base/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Huawei Cloud Knowledge Base"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Compute category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/" class="nav-list-link">Compute</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Elastic Cloud Server (ECS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ecs" class="nav-list-link">Elastic Cloud Server (ECS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-gui-on-public-linux-images" class="nav-list-link">Installing GUI on Public Linux Images</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/installing-sql-server-ubuntu" class="nav-list-link">Installing SQL Server on Ubuntu</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/remote-login-bricked-error" class="nav-list-link">Remote Login Bricked Error</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ecs/slow-aws-cli-s3-upload-rate-on-windows" class="nav-list-link">Slow AWS CLI S3 Upload Rate on Windows ECSs</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in FunctionGraph category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph" class="nav-list-link">FunctionGraph</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/custom-container-image-function" class="nav-list-link">Custom Container Image Function</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/obs-triggered-functions" class="nav-list-link">OBS-triggered Functions</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/functiongraph/pipeline-integration" class="nav-list-link">Pipeline Integration</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Image Management Service (IMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/compute/ims" class="nav-list-link">Image Management Service (IMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-7-9-image" class="nav-list-link">Creating a Private OracleOS 7.9 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-oracle-os-9-4-image" class="nav-list-link">Creating a Private OracleOS 9.4 Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-ubuntu-image" class="nav-list-link">Creating a Private Ubuntu Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-10-and-ubuntu-workspace-image" class="nav-list-link">Creating a Private Windows 10 and Ubuntu Workspace Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/creating-a-private-windows-image" class="nav-list-link">Creating a Private Windows Image</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/compute/ims/migrating-multiple-disks" class="nav-list-link">Migrating Multiple Disks</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Containers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers" class="nav-list-link">Containers</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Container Engine (CCE) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/containers/cce" class="nav-list-link">Cloud Container Engine (CCE)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-azure-aks-to-huawei-cce" class="nav-list-link">Migrating Azure AKS to Huawei CCE</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/containers/cce/migrating-k8s-cluster-using-velero" class="nav-list-link">Migrating K8S Cluster Using Velero</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Databases category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases" class="nav-list-link">Databases</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Database and Application Migration (UGO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/databases/ugo" class="nav-list-link">Database and Application Migration (UGO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/databases/ugo/migrating-mysql-to-gaussdb" class="nav-list-link">Migrating MySQL to GaussDB</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack" class="nav-list-link">Huawei Cloud Stack</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Huawei Cloud Stack Online (HCSO) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso" class="nav-list-link">Huawei Cloud Stack Online (HCSO)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/huawei-cloud-stack/hcso/terraform-startup" class="nav-list-link">Terraform Startup</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Management & Governance category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance" class="nav-list-link">Management & Governance</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Eye Service (CES) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces" class="nav-list-link">Cloud Eye Service (CES)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/creating-and-managing-alarms" class="nav-list-link">Creating and Managing Alarms</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/monitoring-data-through-api-calling" class="nav-list-link">Monitoring Data Through API Calling</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/ces/resources-monitoring" class="nav-list-link">Resources Monitoring</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Cloud Operations Center (COC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc" class="nav-list-link">Cloud Operations Center (COC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/coc/automate-resources-lifecycle" class="nav-list-link">Automate Resources Lifecycle</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in IAM Identity Center (IIC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic" class="nav-list-link">IAM Identity Center (IIC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Identity and Access Management (IAM) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam" class="nav-list-link">Identity and Access Management (IAM)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-openid" class="nav-list-link">User Federation with Keycloak (OpenID)</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iam/user-federation-with-keycloak-saml-2" class="nav-list-link">User Federation with Keycloak (SAML 2.0)</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration" class="nav-list-link">Migration</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Migration Center (MgC) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/mgc" class="nav-list-link">Migration Center (MgC)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/mgc/resources-discovery" class="nav-list-link">Resources Discovery</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Server Migration Service (SMS) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/migration/sms" class="nav-list-link">Server Migration Service (SMS)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/bricked-ecs-after-migration-troubleshooting" class="nav-list-link">Bricked ECS After Migration Troubleshooting</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/failed-to-start-agent-error-quota-is-not-enough" class="nav-list-link">Failed to start agent，error：Current quota is not enough, please use MgC</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-servers-with-huge-disks" class="nav-list-link">Migrating Servers with Huge Disks</a></li><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/migration/sms/migrating-unsupported-os" class="nav-list-link">Migrating Unsupported OSs</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Networking category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking" class="nav-list-link">Networking</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Virtual Private Network (VPN) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/huaweicloud-knowledge-base/docs/networking/vpn" class="nav-list-link">Virtual Private Network (VPN)</a><ul class="nav-list"><li class="nav-list-item"><a href="/huaweicloud-knowledge-base/docs/networking/vpn/vpn-client-to-site-startup" class="nav-list-link">VPN Client to Site Startup</a></li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Huawei Cloud Knowledge Base" aria-label="Search Huawei Cloud Knowledge Base" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" class="site-button">en</a> </li> <li class="aux-nav-list-item"> <a href="https://hatz-d.github.io/huaweicloud-knowledge-base/pt/docs/management-and-governance/iic/user-federation-with-keycloak-saml-2" class="site-button">pt</a> </li> </ul> </nav> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/Hatz-D/huaweicloud-knowledge-base" class="site-button" > Contribute </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance">Management & Governance</a></li> <li class="breadcrumb-nav-list-item"><a href="/huaweicloud-knowledge-base/docs/management-and-governance/iic">IAM Identity Center (IIC)</a></li> <li class="breadcrumb-nav-list-item"><span>User Federation with Keycloak (SAML 2.0)</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p><img width="450px" height="102px" src="https://console-static.huaweicloud.com/static/authui/20210202115135/public/custom/images/logo-en.svg" /></p> <h1 id="user-federation-with-keycloak-saml-20"> <a href="#user-federation-with-keycloak-saml-20" class="anchor-heading" aria-labelledby="user-federation-with-keycloak-saml-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User Federation with Keycloak (SAML 2.0) </h1> <p>V1.0 – October 2024</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Version</strong></th> <th><strong>Author</strong></th> <th><strong>Description</strong></th> </tr> </thead> <tbody> <tr> <td>V1.0 – 2024-10-25</td> <td>Diogo Hatz d50037923</td> <td>Initial Version</td> </tr> <tr> <td>V1.0 – 2024-10-25</td> <td>Wisley da Silva Paulo 00830850</td> <td>Document Review</td> </tr> </tbody> </table></div> <h1 id="objective"> <a href="#objective" class="anchor-heading" aria-labelledby="objective"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Objective </h1> <p>This document aims to present the procedures required to implement identity federation configuration in Huawei Cloud (Service Provider) through an identity provider (IdP), such as RedHat SSO or Keycloak. In this example, the protocol used for identity federation will be SAML 2.0, mapping users from the identity provider to IAM users in Huawei Cloud.</p> <p>The diagram below shows the flow of the authentication process in Huawei Cloud using an IdP.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image3.png" alt="" /></p> <h1 id="keycloak-endpoint"> <a href="#keycloak-endpoint" class="anchor-heading" aria-labelledby="keycloak-endpoint"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Keycloak Endpoint </h1> <p>To integrate Huawei Cloud with an Identity Provider, you must first obtain the XML configuration file for the protocol to be used from the Identity Provider.</p> <p>Access the Keycloak portal and navigate to the “Realm Settings” section. Click “SAML 2.0 Identity Provider Metadata” in the “Endpoints” subsection, and save the opened web page locally as an XML file.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image4.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image5.png" alt="" /></p> <h1 id="iic"> <a href="#iic" class="anchor-heading" aria-labelledby="iic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IIC </h1> <h2 id="external-identity-provider"> <a href="#external-identity-provider" class="anchor-heading" aria-labelledby="external-identity-provider"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>External Identity Provider</strong> </h2> <p>Access the IIC service in the Huawei Cloud console and navigate to the “Settings” section. Click “Change to external identity provider” to create an identity federation configuration.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image6.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image7.png" alt="" /></p> <p>Click “Download Metadata File” to download the XML configuration file of the protocol to be used (SAML 2.0) of the Service Provider.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image8.png" alt="" /></p> <p>Click “Select File” in the “Identity Provider Details” subsection and select the XML file downloaded in item 2.0 of this document.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image9.png" alt="" /></p> <p>Once done, just click “Next” followed by “OK” to finish the configuration.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image10.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image11.png" alt="" /></p> <p><strong>Note:</strong> The next three subsections (3.2, 3.3 and 3.4) are related to user, group, permission set and Organization account configurations. If these configurations have already been configured, ignore the aforementioned subsections.</p> <h2 id="users-and-groups"> <a href="#users-and-groups" class="anchor-heading" aria-labelledby="users-and-groups"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Users and Groups</strong> </h2> <p>To perform identity federation using an Identity Provider, users and user groups must be created in the Service Provider. To do this, select the “Groups” section and click “Create Group” to create a user group.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image12.png" alt="" /></p> <p>Give the group a name and select “OK” to finish creating the user group.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image13.png" alt="" /></p> <p>To create users, access the “Users” section and click “Create User”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image14.png" alt="" /></p> <p>Fill in the relevant user information, such as username and email, and click “Next” to proceed.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image15.png" alt="" /></p> <p>Select a user group to which the user will belong and click “Next” followed by “OK” to finish creating the user.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image16.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image17.png" alt="" /></p> <h2 id="permission-sets"> <a href="#permission-sets" class="anchor-heading" aria-labelledby="permission-sets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Permission Sets</strong> </h2> <p>In addition to users and groups, permission sets are also required to delegate permissions to the users created. To do this, navigate to the “Permission Sets” subsection in the “Multi-Account Permissions” section, and click “Create Permission Set”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image18.png" alt="" /></p> <p>Fill in the fields related to the user’s session time and the permission set name and click “Next” to continue.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image19.png" alt="" /></p> <p>Select the permissions that the permission set will have and select “Next” followed by “OK” to finish creating the permission set.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image20.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image21.png" alt="" /></p> <h2 id="accounts"> <a href="#accounts" class="anchor-heading" aria-labelledby="accounts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Accounts</strong> </h2> <p>Finally, you will need to configure a triple for the user, permission set and account, in order to delegate permissions to users to specific Organizations accounts. To do this, navigate to the “Accounts” subsection in the “Multi-Account Permissions” section, and click “Assign User/Group” for the desired account.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image22.png" alt="" /></p> <p>Select the users that will have access to the selected account and click “Next” to proceed.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image23.png" alt="" /></p> <p>Select the permission sets that the aforementioned users will have access to in the selected account and click “Next” followed by “OK” to finish delegating permissions to users.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image24.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image25.png" alt="" /></p> <h1 id="keycloak-client"> <a href="#keycloak-client" class="anchor-heading" aria-labelledby="keycloak-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Keycloak Client </h1> <p>To integrate Huawei Cloud with Keycloak, you must first create a Client in the IdP. To do this, go to the IdP (Keycloak) settings page and navigate to the “Clients” section. Click “Create” to create a new client.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image26.png" alt="" /> <img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image27.png" alt="" /></p> <p>Click “Select file” to import the Huawei Cloud XML configuration file saved in item 3.1 of this document, and click “Save”.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image28.png" alt="" /> <img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image29.png" alt="" /></p> <p>Navigate to the Huawei Cloud client you created and click “Edit” to edit the client settings.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image30.png" alt="" /></p> <p>Turn off the “Client Signature Required” option, enable the “Force Name ID Format” option, select the “Name ID Format” field as “username” and click “Save” to save the changes made.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image31.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image32.png" alt="" /></p> <p>Navigate to the “Mappers” section, still in the Huawei Cloud client settings, and click “Create” to create a mapper for the username.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image33.png" alt="" /></p> <p>Select the “Mapper Type” as “User Property” and fill in the fields as shown in the image below.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image34.png" alt="" /></p> <p>Navigate once again to the “Mappers” section, still in the Huawei Cloud client settings, and click “Create” to create a mapper for the group.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image33.png" alt="" /></p> <p>Select the “Mapper Type” as “Group list” and fill in the fields as shown in the image below.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image35.png" alt="" /></p> <p><strong>Note:</strong> To perform Huawei Cloud user federation, users must first exist. If there is no user created in Keycloak, create a user.</p> <h1 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h1> <p>The following is an example of validating login to the Huawei Cloud console through identity federation.</p> <p>Accessing the IAM Identity Center portal hyperlink.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image36.png" alt="" /></p> <p>Redirection to the Identity Provider login page.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image37.png" alt="" /></p> <p>Redirection to the Huawei Cloud console after authentication is successful.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image38.png" alt="" /></p> <p>Click “Access Console” next to the desired permission set to log in to the desired account.</p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image39.png" alt="" /></p> <p><img src="/huaweicloud-knowledge-base/assets/images/management-and-governance/iic/user-federation-keycloak-saml/image40.png" alt="" /></p> <h1 id="references"> <a href="#references" class="anchor-heading" aria-labelledby="references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> References </h1> <ul> <li>IIC Documentation: <a href="https://support.huaweicloud.com/intl/en-us/productdesc-identitycenter/iic_01_0002.html">https://support.huaweicloud.com/intl/en-us/productdesc-identitycenter/iic_01_0002.html</a></li> <li>Huawei Cloud Blog: <a href="https://bbs.huaweicloud.com/blogs/429838">https://bbs.huaweicloud.com/blogs/429838</a></li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
